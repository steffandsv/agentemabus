<%- include('partials/header') %>

<!-- HERO SECTION / DASHBOARD HEADER -->
<div class="content-section">
    <div class="d-flex justify-content-between align-items-end">
        <div>
            <h2 class="section-title">Radar de Oportunidades</h2>
            <p class="text-secondary mb-0">Inteligência de mercado em tempo real.</p>
        </div>
        <div>
             <a href="/oracle" class="btn btn--primary">
                <i class="fas fa-plus"></i> Nova Análise
             </a>
        </div>
    </div>
</div>

<!-- OPPORTUNITIES GRID -->
<div class="content-section">
    <% if (opportunities && opportunities.length > 0) { %>
        <div class="card-grid">
            <% opportunities.forEach(opp => { %>
                <% const isLocked = (user && user.role === 'admin') ? false : true; %>
                <%- include('partials/opportunity_card', { opp: opp, isLocked: isLocked }) %>
            <% }) %>
        </div>
    <% } else { %>
        <div class="card" style="text-align: center; padding: 40px;">
            <div style="color: var(--color-gray-primary); font-size: 48px; margin-bottom: 16px;">
                <i class="fas fa-search"></i>
            </div>
            <h3 class="card-title">Nenhuma oportunidade encontrada</h3>
            <p class="text-secondary" style="max-width: 400px; margin: 0 auto 24px auto;">
                O sistema ainda não encontrou editais relevantes ou você ainda não realizou uma busca.
            </p>
            <div>
                <a href="/oracle" class="btn btn--primary">Ir para o Analisador</a>
            </div>
        </div>
    <% } %>
</div>

<%- include('partials/footer') %>
