<%- include('partials/header') %>

<!-- HERO SECTION / DASHBOARD HEADER -->
<div class="mb-8">
    <div class="flex flex-col md:flex-row justify-between items-end gap-4">
        <div>
            <h2 class="text-3xl font-bold text-base-content">Radar de Oportunidades</h2>
            <p class="text-base-content/60">Inteligência de mercado em tempo real.</p>
        </div>
        <div>
             <a href="/oracle" class="btn btn-primary text-white">
                <i class="fas fa-plus"></i> Nova Análise
             </a>
        </div>
    </div>
</div>

<!-- OPPORTUNITIES GRID -->
<div class="mb-12">
    <% if (opportunities && opportunities.length > 0) { %>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-6">
            <% opportunities.forEach(opp => { %>
                <% const isLocked = (user && user.role === 'admin') ? false : true; %>
                <%- include('partials/opportunity_card', { opp: opp, isLocked: isLocked }) %>
            <% }) %>
        </div>
    <% } else { %>
        <div class="card bg-base-100 shadow-sm border border-base-200 text-center py-16">
            <div class="text-6xl text-base-content/20 mb-4">
                <i class="fas fa-search"></i>
            </div>
            <h3 class="text-xl font-bold mb-2">Nenhuma oportunidade encontrada</h3>
            <p class="text-base-content/60 max-w-md mx-auto mb-6">
                O sistema ainda não encontrou editais relevantes ou você ainda não realizou uma busca.
            </p>
            <div>
                <a href="/oracle" class="btn btn-primary text-white">Ir para o Analisador</a>
            </div>
        </div>
    <% } %>
</div>

<%- include('partials/footer') %>
