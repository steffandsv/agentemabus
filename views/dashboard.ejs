<%- include('partials/header') %>

<div class="row mb-4">
    <div class="col-12 text-center">
        <h2 class="brand-font text-neon">DASHBOARD TÁTICO</h2>
        <p class="text-muted">Gestão de Missões Ativas</p>
    </div>
</div>

<div class="row mb-3">
    <div class="col-12 d-flex justify-content-end gap-2">
        <a href="/dashboard" class="btn btn-sm btn-outline-secondary <%= !showArchived ? 'active' : '' %>">ATIVOS</a>
        <a href="/dashboard?show_archived=true" class="btn btn-sm btn-outline-secondary <%= showArchived ? 'active' : '' %>">ARQUIVO</a>
    </div>
</div>

<% if (tasks.length === 0) { %>
    <div class="text-center py-5 border border-secondary rounded border-dashed opacity-50">
        <i class="fas fa-inbox fa-3x mb-3 text-muted"></i>
        <p class="text-muted">Nenhuma missão encontrada.</p>
        <a href="/oracle" class="btn btn-primary">NOVA MISSÃO</a>
    </div>
<% } else { %>
    <div class="row g-3">
        <%- include('partials/task_list', { tasks: tasks }) %>
    </div>

    <div class="d-flex justify-content-center mt-4">
        <% if (page > 1) { %>
            <a href="/dashboard?page=<%= page - 1 %>&show_archived=<%= showArchived %>" class="btn btn-outline-secondary me-2">Anterior</a>
        <% } %>
        <% if (hasNext) { %>
            <a href="/dashboard?page=<%= page + 1 %>&show_archived=<%= showArchived %>" class="btn btn-outline-secondary">Próximo</a>
        <% } %>
    </div>
<% } %>

<%- include('partials/footer') %>
