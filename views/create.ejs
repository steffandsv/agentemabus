<%- include('partials/header') %>

<div class="row justify-content-center">
    <div class="col-md-8">
        <h2 class="mb-4">‚ú® Nova Miss√£o</h2>
        <div class="card shadow">
            <div class="card-body">
                <form action="/create" method="POST" enctype="multipart/form-data">
                    <div class="mb-3">
                        <label class="form-label">Nome da Tarefa</label>
                        <input type="text" name="name" class="form-control" required placeholder="Ex: Cota√ß√£o TI - Lote 1">
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">CEP de Destino</label>
                        <input type="text" name="cep" class="form-control" required placeholder="00000-000">
                    </div>

                    <div class="mb-3">
                        <label class="form-label">M√≥dulo de IA</label>
                        <select name="moduleName" class="form-select">
                            <% modules.forEach(function(mod) { %>
                                <option value="<%= mod %>" <%= mod === 'smart' ? 'selected' : '' %>><%= mod %></option>
                            <% }); %>
                        </select>
                        <div class="form-text">Selecione qual "c√©rebro" executar√° a tarefa. O padr√£o agora √© "Smart" (Gemini+Meli com fallback para Perplexity).</div>
                    </div>

                    <div class="card mb-3 bg-light">
                        <div class="card-body">
                            <h5 class="card-title">Dados de Entrada</h5>
                            <p class="card-text text-muted small">Escolha uma das op√ß√µes abaixo:</p>
                            
                            <ul class="nav nav-tabs" id="inputTab" role="tablist">
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link active" id="file-tab" data-bs-toggle="tab" data-bs-target="#file-pane" type="button" role="tab">üìÅ Enviar Arquivo</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="text-tab" data-bs-toggle="tab" data-bs-target="#text-pane" type="button" role="tab">üìù Colar Texto</button>
                                </li>
                            </ul>
                            
                            <div class="tab-content pt-3" id="inputTabContent">
                                <div class="tab-pane fade show active" id="file-pane" role="tabpanel">
                                    <div class="mb-3">
                                        <label class="form-label">Arquivo CSV</label>
                                        <div class="input-group">
                                            <input type="file" name="csvFile" class="form-control" accept=".csv">
                                            <a href="/download-template" class="btn btn-outline-secondary">‚¨áÔ∏è Baixar Modelo</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="text-pane" role="tabpanel">
                                    <div class="mb-3">
                                        <label class="form-label">Conte√∫do do CSV</label>
                                        <textarea name="csvText" class="form-control" rows="5" placeholder="ID;Descricao;valor_venda;quantidade&#10;1;Notebook i7;3500.00;2&#10;2;Mouse sem fio;50.00;10"></textarea>
                                        <div class="form-text">Cole o conte√∫do seguindo o cabe√ßalho <code>ID;Descricao;valor_venda;quantidade</code>.</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="d-grid gap-2">
                        <button type="submit" class="btn btn-primary">üöÄ Decolar (Iniciar)</button>
                        <a href="/" class="btn btn-outline-secondary">Cancelar</a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<%- include('partials/footer') %>
